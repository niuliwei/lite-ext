/*
Copyright 2011, KISSY UI Library v1.1.7dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("selectable2/base",function(e,g){function f(){this.get("inputNode")}f.ATTRS={inputNode:{setter:function(d){return g.one(d)}},inputValue:{},inputDisplay:{valueFn:function(){this.get("inputNode").val()}}};f.prototype={_uiSetInputNode:function(d){d.attr("autocomplete","off")},_uiSetInputDisplay:function(d){this.get("inputNode").val(d)},_uiSetInputValue:function(d){this.get("inputNode").attr("data-value",d)}};return f},{requires:["node"]});
KISSY.add("selectable2/list",function(e,g){function f(){}function d(a){return g.one(a)}function k(a,b){a.hasClass(b)||(a=a.parent("."+b));return a}function j(){var a=this,b=a.__listWrap;b.on("click",function(c){var h=k(c.target,a.get("listItemClass"));h&&a.set("selectListItem",h);c.halt()});b.on("mousedown",function(c){c.halt()});b.on("mouseover",function(c){(c=k(c.target,a.get("listItemClass")))&&a.set("hoverListItem",c)});b.on("mouseleave",function(){a.set("hoverListItem",null)});b.on("keydown",
function(){})}f.ATTRS={listData:{setter:function(a){return a||[]}},listClass:{value:"ks-selectable2-list"},listItemClass:{value:"ks-selectable2-list-item"},listItemHoverClass:{value:"ks-selectable2-list-item-hover"},listItemActiveClass:{value:"ks-selectable2-list-item-active"},hoverListItem:{setter:d},activeListItem:{setter:d},selectListItem:{setter:d}};f.prototype={__renderUI:function(){this.__listWrap=(new g(e.substitute("<ul class='{listClass}'>",{listClass:this.get("listClass")}))).appendTo(this.get("contentEl"));
j.apply(this)},_uiSetHoverListItem:function(a,b){b&&b.prevVal&&b.prevVal.removeClass(this.get("listItemHoverClass"));a&&a.addClass(this.get("listItemHoverClass"))},_uiSetActiveListItem:function(a,b){b&&b.prevVal&&b.prevVal.removeClass(this.get("listItemActiveClass"));a&&a.addClass(this.get("listItemActiveClass"))},_uiSetListData:function(a){this.__listWrap.html("");for(var b=0;b<a.length;b++){var c=a[b];this.__listWrap.append(new g(e.substitute("<li class='{listItemClass}' data-value='{listItemValue}'>{listItem}</li>",
{listItemClass:this.get("listItemClass"),listItem:c.display,listItemValue:c.value})))}this.__listWrap.unselectable()},__destructor:function(){var a=this.__listWrap;a.detach();a.remove()}};return f},{requires:["node"]});
KISSY.add("selectable2/select",function(e,g,f,d,k,j){return g.create([e.require("uibase/box"),e.require("uibase/contentbox"),e.require("uibase/position"),k.ie==6?e.require("uibase/shim"):null,e.require("uibase/align"),f,d],{initializer:function(){var a=this,b,c,h;if(b=a.get("inputNode")){c=a.selectWrap=(new j(e.substitute("<span class='{selectClass}'><span class='{selectArrowClass}'></span></span>",{selectClass:a.get("selectClass"),selectArrowClass:a.get("selectArrowClass")}))).insertBefore(b);c.prepend(b);
h=c.one("."+a.get("selectArrowClass"));b.attr("readonly","readonly");var l={node:b,points:["bl","tl"]};a.set("align",l);c.on("click",function(i){a.render();a.set("visible",!a.get("visible"));i.halt()});j.one(document).on("click",function(){a.hide()});a.on("show",function(){a.align(l.node,l.points)});a.on("hide",function(){a.set("xy",[-9999,-9999])});if(a.get("width")){c.css("width",a.get("width"));b.css("width",c.width()-h[0].offsetWidth-(b[0].offsetWidth-b.width()))}else a.set("width",c[0].offsetWidth);
a.on("afterSelectListItemChange",function(i){i=i.newVal;a.set("inputDisplay",i.html());a.set("inputValue",i.attr("data-value"));a.hide()});h=null;if(h=a.get("inputDisplay"))b.val(h);(new j("<span class='ks-selectable2-mask'>")).insertBefore(b).css("opacity",0);c.unselectable()}}},{ATTRS:{selectClass:{value:"ks-selectable2-wrap"},selectArrowClass:{value:"ks-selectable2-arrow"}}})},{requires:["uibase","selectable2/list","selectable2/base","ua","node"]});
KISSY.add("selectable2",function(e,g,f,d){return{Select:d}},{requires:["selectable2/base","selectable2/list","selectable2/select"]});
