/*
Copyright 2011, KISSY UI Library v1.1.7dev
MIT Licensed
build time: ${build.time}
*/
KISSY.add("uibase/align",function(f,e){function a(){}function d(b,c){var g=f.require("node/node"),l=c.charAt(0),h=c.charAt(1),j,i,k;if(b){b=g.one(b);j=b.offset();g=b[0].offsetWidth;i=b[0].offsetHeight}else{j={left:e.scrollLeft(),top:e.scrollTop()};g=e.viewportWidth();i=e.viewportHeight()}k=j.left;j=j.top;if(l==="c")j+=i/2;else if(l==="b")j+=i;if(h==="c")k+=g/2;else if(h==="r")k+=g;return{left:k,top:j}}f.mix(a,{TL:"tl",TC:"tc",TR:"tr",CL:"cl",CC:"cc",CR:"cr",BL:"bl",BC:"bc",BR:"br"});a.ATTRS={align:{}};
a.prototype={_uiSetAlign:function(b){f.isPlainObject(b)&&this.align(b.node,b.points,b.offset)},align:function(b,c,g){var l,h=this.get("el");g=g||[0,0];l=h.offset();b=d(b,c[0]);c=d(h,c[1]);c=[c.left-b.left,c.top-b.top];l=[l.left-c[0]+ +g[0],l.top-c[1]+ +g[1]];this.set("xy",l)},center:function(b){this.set("align",{node:b,points:[a.CC,a.CC],offset:[0,0]})}};return a},{requires:["dom"]});
KISSY.add("uibase/base",function(f,e){function a(h){e.apply(this,arguments);for(var j=this.constructor;j;){if(h&&h[b]&&j.HTML_PARSER)if(h[b]=c.one(h[b])){var i=h[b],k=j.HTML_PARSER,m=void 0,n=void 0;for(m in k)if(k.hasOwnProperty(m)){n=k[m];if(f.isFunction(n))this.__set(m,n.call(this,i));else if(f.isString(n))this.__set(m,i.one(n));else f.isArray(n)&&n[0]&&this.__set(m,i.all(n[0]))}}j=j.superclass&&j.superclass.constructor}d(this,"initializer","constructor");h&&h.autoRender&&this.render()}function d(h,
j,i){for(var k=h.constructor,m=[],n,o,q;k;){q=[];if(o=k.__ks_exts)for(var p=0;p<o.length;p++)if(n=o[p]){if(i!="constructor")n=o[p].prototype[i];n&&q.push(n)}if(n=k.prototype[j])q.push(n);q.length&&m.push.apply(m,q.reverse());k=k.superclass&&k.superclass.constructor}for(p=m.length-1;p>=0;p--)m[p]&&m[p].call(h)}var b="srcNode",c=f.require("node/node"),g=f.require("base/attribute").__capitalFirst,l=function(){};a.HTML_PARSER={};a.ATTRS={render:{valueFn:function(){return document.body}},rendered:{value:false}};
f.extend(a,e,{render:function(){if(!this.get("rendered")){this._renderUI();this.fire("renderUI");d(this,"renderUI","__renderUI");this._bindUI();this.fire("bindUI");d(this,"bindUI","__bindUI");this._syncUI();this.fire("syncUI");d(this,"syncUI","__syncUI");this.set("rendered",true)}},_renderUI:l,renderUI:l,_bindUI:function(){var h=this,j=h.__getDefAttrs(),i,k;for(i in j)if(j.hasOwnProperty(i)){k="_uiSet"+g(i);h[k]&&function(m,n){h.on("after"+g(m)+"Change",function(o){h[n](o.newVal,o)})}(i,k)}},bindUI:l,
_syncUI:function(){var h=this.__getDefAttrs(),j;for(j in h)if(h.hasOwnProperty(j)){var i="_uiSet"+g(j);this[i]&&this[i](this.get(j))}},syncUI:l,destroy:function(){for(var h=this.constructor,j,i,k;h;){(i=h.prototype.destructor)&&i.apply(this);if(j=h.__ks_exts)for(k=j.length-1;k>=0;k--)(i=j[k]&&j[k].prototype.__destructor)&&i.apply(this);h=h.superclass&&h.superclass.constructor}this.fire("destroy");this.detach()}});a.create=function(h,j,i,k){function m(){a.apply(this,arguments)}if(f.isArray(h)){k=i;
i=j;j=h;h=a}h=h||a;f.extend(m,h,i,k);if(j){m.__ks_exts=j;f.each(j,function(n){if(n){f.each(["ATTRS","HTML_PARSER"],function(o){if(n[o]){m[o]=m[o]||{};f.mix(m[o],n[o],false)}});f.augment(m,n,false)}})}return m};return a},{requires:["base","dom","node"]});
KISSY.add("uibase/box",function(f){function e(){}f.mix(e,{APPEND:1,INSERT:0});e.ATTRS={el:{setter:function(a){var d=f.require("node/node");if(f.isString(a))return d.one(a)}},elCls:{},elStyle:{},width:{},height:{},elTagName:{value:"div"},elAttrs:{},elOrder:{value:1},html:{value:false}};e.HTML_PARSER={el:function(a){return a}};e.prototype={__syncUI:function(){},__bindUI:function(){},__renderUI:function(){var a=f.require("node/node"),d=this.get("render"),b=this.get("el");d=new a(d);if(!b){b=new a("<"+
this.get("elTagName")+">");this.get("elOrder")?d.append(b):d.prepend(b);this.set("el",b)}},_uiSetElAttrs:function(a){a&&this.get("el").attr(a)},_uiSetElCls:function(a){a&&this.get("el").addClass(a)},_uiSetElStyle:function(a){a&&this.get("el").css(a)},_uiSetWidth:function(a){a&&this.get("el").width(a)},_uiSetHeight:function(a){a&&this.get("el").height(a)},_uiSetHtml:function(a){a!==false&&this.get("el").html(a)},__destructor:function(){var a=this.get("el");if(a){a.detach();a.remove()}}};return e});
KISSY.add("uibase/close",function(f){function e(){}e.ATTRS={closable:{value:true},closeBtn:{}};e.HTML_PARSER={closeBtn:".ks-ext-close"};e.prototype={__syncUI:function(){},_uiSetClosable:function(a){var d=this.get("closeBtn");if(d)a?d.css("display",""):d.css("display","none")},__renderUI:function(){var a=f.require("node/node"),d=this.get("closeBtn"),b=this.get("contentEl");if(!d&&b){d=(new a("<a href='#' class='ks-ext-close'><span class='ks-ext-close-x'>X</span></a>")).appendTo(b);this.set("closeBtn",
d)}},__bindUI:function(){var a=this,d=a.get("closeBtn");d&&d.on("click",function(b){a.hide();b.halt()})},__destructor:function(){var a=this.get("closeBtn");a&&a.detach()}};return e});
KISSY.add("uibase/constrain",function(f,e){function a(){}function d(c){var g;if(!c)return g;var l=this.get("el");if(c!==true){c=b.one(c);g=c.offset();f.mix(g,{maxLeft:g.left+c[0].offsetWidth-l[0].offsetWidth,maxTop:g.top+c[0].offsetHeight-l[0].offsetHeight})}else{c=document.documentElement.clientWidth;g={left:e.scrollLeft(),top:e.scrollTop()};f.mix(g,{maxLeft:g.left+c-l[0].offsetWidth,maxTop:g.top+e.viewportHeight()-l[0].offsetHeight})}return g}var b=f.require("node/node");a.ATTRS={constrain:{value:false}};
a.prototype={__bindUI:function(){},__renderUI:function(){var c=this,g=c.__getDefAttrs(),l=g.x;g=g.y;var h=l.setter,j=g.setter;l.setter=function(i){var k=h&&h(i);if(k===undefined)k=i;if(!c.get("constrain"))return k;i=d.call(c,c.get("constrain"));return Math.min(Math.max(k,i.left),i.maxLeft)};g.setter=function(i){var k=j&&j(i);if(k===undefined)k=i;if(!c.get("constrain"))return k;i=d.call(c,c.get("constrain"));return Math.min(Math.max(k,i.top),i.maxTop)};c.addAttr("x",l);c.addAttr("y",g)},__syncUI:function(){},
__destructor:function(){}};return a},{requires:["dom","node"]});
KISSY.add("uibase/contentbox",function(f){function e(){}var a=f.require("node/node");e.ATTRS={contentEl:{},contentElAttrs:{},contentElStyle:{},contentTagName:{value:"div"},content:{}};e.HTML_PARSER={contentEl:".ks-contentbox"};e.prototype={__syncUI:function(){},__bindUI:function(){},__renderUI:function(){var d=this.get("contentEl"),b=this.get("el");if(!d){var c=f.makeArray(b[0].childNodes);d=(new a("<"+this.get("contentTagName")+" class='ks-contentbox'>")).appendTo(b);for(b=0;b<c.length;b++)d.append(c[b]);
this.set("contentEl",d)}},_uiSetContentElAttrs:function(d){d&&this.get("contentEl").attr(d)},_uiSetContentElStyle:function(d){d&&this.get("contentEl").css(d)},_uiSetContent:function(d){if(d!==undefined)if(f.isString(d))this.get("contentEl").html(d);else{this.get("contentEl").html("");this.get("contentEl").append(d)}},__destructor:function(){}};return e},{requires:["dom","node"]});
KISSY.add("uibase/drag",function(f){function e(){}e.ATTRS={handlers:{value:[]},draggable:{value:true}};e.prototype={_uiSetHandlers:function(a){a&&a.length>0&&this.__drag&&this.__drag.set("handlers",a)},__syncUI:function(){},__renderUI:function(){},__bindUI:function(){var a=f.require("dd/draggable"),d=this.get("el");if(this.get("draggable")&&a)this.__drag=new a({node:d,handlers:this.get("handlers")})},_uiSetDraggable:function(a){var d=this.__drag;if(d)if(a){d.detach("drag");d.on("drag",this._dragExtAction,
this)}else d.detach("drag")},_dragExtAction:function(a){this.set("xy",[a.left,a.top])},__destructor:function(){var a=this.__drag;a&&a.destroy()}};return e});
KISSY.add("uibase/loading",function(f){function e(){}e.prototype={loading:function(){if(!this._loadingExtEl)this._loadingExtEl=(new (f.require("node/node"))("<div class='ks-ext-loading' style='position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);'>")).appendTo(this.get("el"));this._loadingExtEl.show()},unloading:function(){var a=this._loadingExtEl;a&&a.hide()}};return e});
KISSY.add("uibase/mask",function(f){function e(){}var a,d=0;e.ATTRS={mask:{value:false}};e.prototype={__bindUI:function(){},__renderUI:function(){},__syncUI:function(){},_uiSetMask:function(b){if(b){this.on("show",this._maskExtShow);this.on("hide",this._maskExtHide)}else{this.detach("show",this._maskExtShow);this.detach("hide",this._maskExtHide)}},_maskExtShow:function(){if(!a){var b=f.require("ua"),c=f.require("node/node"),g=f.require("dom");a=(new c("<div class='ks-ext-mask'>")).prependTo(document.body);
a.css({position:"absolute",left:0,top:0,width:b.ie==6?g.docWidth():"100%",height:g.docHeight()});b.ie==6&&a.append("<iframe style='width:100%;height:expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;'>")}a.css({"z-index":this.get("zIndex")-1});d++;a.css("display","")},_maskExtHide:function(){d--;if(d<=0)d=0;d||a&&a.css("display","none")},__destructor:function(){}};return e},{requires:["ua"]});
KISSY.add("uibase/position",function(f,e,a){function d(){}var b=document;d.ATTRS={x:{},y:{},xy:{setter:function(c){var g=f.makeArray(c);if(g.length){g[0]&&this.set("x",g[0]);g[1]&&this.set("y",g[1])}return c}},zIndex:{value:9999},visible:{value:undefined}};d.prototype={__syncUI:function(){},__renderUI:function(){var c=this.get("el");c.addClass("ks-ext-position");c.css("display","")},__bindUI:function(){},_uiSetZIndex:function(c){c!==undefined&&this.get("el").css("z-index",c)},_uiSetX:function(c){c!==
undefined&&this.get("el").offset({left:c})},_uiSetY:function(c){c!==undefined&&this.get("el").offset({top:c})},_uiSetVisible:function(c){if(c!==undefined){this.get("el").css("visibility",c?"visible":"hidden");this[c?"_bindKey":"_unbindKey"]();this.fire(c?"show":"hide")}},_bindKey:function(){a.on(b,"keydown",this._esc,this)},_unbindKey:function(){a.remove(b,"keydown",this._esc,this)},_esc:function(c){c.keyCode===27&&this.hide()},move:function(c,g){if(f.isArray(c)){g=c[1];c=c[0]}this.set("xy",[c,g])},
show:function(){this._firstShow()},_firstShow:function(){this.render();this._realShow();this._firstShow=this._realShow},_realShow:function(){this.set("visible",true)},hide:function(){this.set("visible",false)},__destructor:function(){}};return d},{requires:["dom","event"]});
KISSY.add("uibase/resize",function(f){function e(){}e.ATTRS={resize:{value:{}}};e.prototype={__destructor:function(){self.resizer&&self.resizer.destroy()},_uiSetResize:function(a){var d=f.require("resizable");if(d){this.resizer&&this.resizer.destroy();a.node=this.get("el");a.autoRender=true;if(a.handlers)this.resizer=new d(a)}}};return e});
KISSY.add("uibase/shim",function(f){function e(){}e.ATTRS={shim:{value:true}};e.prototype={__syncUI:function(){},__bindUI:function(){},_uiSetShim:function(a){var d=f.require("node/node"),b=this.get("el");if(a&&!this.__shimEl){this.__shimEl=new d("<iframe style='position: absolute;border: none;width: expression(this.parentNode.offsetWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.offsetHeight);'>");b.prepend(this.__shimEl)}else if(!a&&this.__shimEl){this.__shimEl.remove();
delete this.__shimEl}},__renderUI:function(){},__destructor:function(){}};return e},{host:"uibase"});
KISSY.add("uibase/stdmod",function(f){function e(){}function a(b,c){var g=f.require("node/node"),l=b.get("contentEl"),h=b.get(c);if(!h){h=(new g("<div class='"+d+c+"'>")).appendTo(l);b.set(c,h)}}var d="ks-stdmod-";e.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{value:false},bodyContent:{value:false},footerContent:{value:false}};e.HTML_PARSER={header:"."+d+"header",body:"."+d+"body",footer:"."+d+"footer"};e.prototype={__bindUI:function(){},__syncUI:function(){},
_setStdModContent:function(b,c){if(c!==false)if(f.isString(c))this.get(b).html(c);else{this.get(b).html("");this.get(b).append(c)}},_uiSetBodyStyle:function(b){b!==undefined&&this.get("body").css(b)},_uiSetHeaderStyle:function(b){b!==undefined&&this.get("header").css(b)},_uiSetFooterStyle:function(b){b!==undefined&&this.get("footer").css(b)},_uiSetBodyContent:function(b){this._setStdModContent("body",b)},_uiSetHeaderContent:function(b){this._setStdModContent("header",b)},_uiSetFooterContent:function(b){this._setStdModContent("footer",
b)},__renderUI:function(){a(this,"header");a(this,"body");a(this,"footer")},__destructor:function(){}};return e});KISSY.add("uibase",function(f,e){return e},{requires:["uibase/base","uibase/align","uibase/box","uibase/close","uibase/constrain","uibase/contentbox","uibase/drag","uibase/loading","uibase/mask","uibase/position","uibase/shim","uibase/resize","uibase/stdmod"]});
